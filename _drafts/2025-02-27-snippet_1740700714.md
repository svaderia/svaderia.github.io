# 27th February, Debugging session with Atto

## AFU - Unlocked - Killed
Set Alarm
Kill the clock app, confirmed in the Android process dialogue. 
System UI didnâ€™t play the ringtone ðŸ™‚
Clock App was restarted with another PID and played ringtone. 
We think it might be launched by the notification system and that plates it.

## AFU - Locked - Live
Set Alarm
Lock the phone, Clock is running in background. 
System UI didnâ€™t play the ringtone ðŸ™‚
Clock App played the ringtone. 

## AFU - Locked - Killed
Set Alarm
Lock the phone, Clock is *not* running in the background. 
System UI didnâ€™t play the ringtone ðŸ™‚
Clock App played the ringtone. 


## BFU
Set Alarm


## The files of interest
Ringtone.java

RingtoneManager.java

MediaPlayer.java

ContentResolver.java

## Observation
* If the ringtone is Default && BFU => we are chilling. Clock app plays the
  thing itself.

* If the rington is Argon && BFu => we aren't chilling. Clock app tries to do
  SetDataSource() and throws an exception. 
  * So now the localMediaPlayer = NULL
  * and mRemotePlayer = true
  * So it passes the responsibility to SystemUI:
  * Where SystemUI also tries to do the same thing with local media player, but
    fails
  * It is not allowed to send it to Remote, since it is the remote.
  * SO IT PLAYS THE BONG

* ringtone is Default & BFU



URI for Argon: content://media/internal/audio/medio/216?title=argon&canonical=1
URI for Default: content://settings/system/alarm_alert

### THE THINGY: We think
framework/base/services/core/java/com/android/server/am/ActivityManagerService.java

framework/base/core/res/res/raw/fallbackring.ogg
